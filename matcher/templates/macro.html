{% macro place_box(place) %}
<div class="box">
  <b>{{ place.display_name }}</b><br>
  category: {{ place.category }}
  &mdash;
  type: {{ place.type }}
  &mdash;
  OSM: <a href="https://www.openstreetmap.org/{{ place.osm_type }}/{{ place.osm_id }}">{{ place.osm_type}} {{ place.osm_id }}</a><br>
</div>
{% endmacro %}

{% macro candidate_info(c, filtered={}) %}
  {% set m = c.get_match() %}
    <li><a href="https://www.openstreetmap.org/{{ c.osm_type }}/{{ c.osm_id }}">
      {{ (m.osm_key + '=' + m.osm_name) if m else c.name }}
    </a>
    ({{ c.osm_type}}{% if c.dist %},
     {{ c.dist | int }} m{% endif %})
     {{ ', '.join(c.matching_tags()) }}

       {% if c.item_id in filtered and c == filtered[c.item_id] %}
         <span class="highlight">best match</span>
       {% endif %}

     <a href="#" class="show_tags_link" data-key="{{ c.key }}">show all tags</a>
     <div class="all_tags" id="candidate{{ c.key }}">
       {% for k, v in c.tags.items() if k != 'way_area' %}
        {{ k }}: {{ v }}</br>
       {% endfor %}
     </div>
     {% if 'wikidata' in c.tags %}
       <br>
       {% if c.tags.wikidata == c.item.qid %}
         wikidata <span class="match">match</span>: {{ c.tags.wikidata }}
       {% else %}
         wikidata <span class="mismatch">mismatch</span>: <a href="https://www.wikidata.org/wiki/{{ c.tags.wikidata }}">{{ c.tags.wikidata }}</a>
       {% endif %}
     {% endif %}
    </li>
{% endmacro %}

{% macro render_pagination(pagination) %}
{% if pagination.pages > 1 %}
<nav aria-label="Page navigation example">
  <ul class="pagination">
  {% if pagination.has_prev %}
		<li class="page-item"><a class="page-link" href="{{ url_for_other_page(pagination.page - 1) }}">&laquo; Previous</a></li>
  {% endif %}
  {%- for page in pagination.iter_pages() %}
    {% if page %}
      {% if page != pagination.page %}
		<li class="page-item"><a class="page-link" href="{{ url_for_other_page(page) }}">{{ page }}</a></li>
      {% else %}
        <li class="page-item active"><a class="page-link" href="{{ url_for_other_page(page) }}">{{ page }} <span class="sr-only">(current)</span></a></li>
      {% endif %}
    {% else %}
      <li><span class="ellipsis">â€¦</span></li>
    {% endif %}
  {%- endfor %}
  {% if pagination.has_next %}
    <li class="page-item">
      <a class="page-link" href="{{ url_for_other_page(pagination.page + 1) }}" aria-label="Next">
        <span aria-hidden="true">Next &raquo;</span>
      </a>
    </li>
  {% endif %}
  </ul>
</nav>
{% endif %}
{% endmacro %}
