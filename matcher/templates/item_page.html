{% extends "base.html" %}

{% block content %}
<div class="m-3">
  <div class="container">
    {% include "flash_msg.html" %}

    <h1>{{ qid }}: {{ label }}</h1>
    <h3>coords</h3>
    <pre>{{ coords | pprint }}</pre>
    <h3>labels</h3>
    <pre>{{ entity['labels'] | pprint }}</pre>
    <h3>aliases</h3>
    <pre>{{ entity['aliases'] | pprint }}</pre>
    <h3>site links</h3>
    <pre>{{ entity['sitelinks'] | pprint }}</pre>

    <h3>wikidata names</h3>
    <pre>{{ wikidata_names | pprint }}</pre>

    <h3>osm_keys</h3>
    <table class="table">
    {% for row in osm_keys %}
      <tr>
        <td>{{ row['item']['value'] }}</td>
        <td>{{ row['label']['value'] }}</td>
        <td>{{ row['tag']['value'] }}</td>
    {% endfor %}
    </table>

    <h3>oql</h3>
    <pre>{{ oql }}</pre>
    <h3>overpass result</h3>
    <pre>{{ overpass_reply['elements'] | pprint }}</pre>

    <h3>matches</h3>
    {% for element, match in found %}
      <pre>{{ element | pprint }}</pre>
      {% if 'wikidata' not in element.tags %}
        <form method="post" action="{{ url_for('add_wikidata_tag') }}">
          <input type="hidden" name="osm_id" value="{{ element.id }}" />
          <input type="hidden" name="osm_type" value="{{ element.type }}" />
          <input type="hidden" name="wikidata" value="{{ qid }}" />
          <button class="btn btn-primary" type="submit">add wikidata tag to OSM</button>
        </form>
      {% else %}
        <p>OSM already includes wikidata tag.</p>
      {% endif %}
    {% endfor %}

  </div>
</div>
{% endblock %}
